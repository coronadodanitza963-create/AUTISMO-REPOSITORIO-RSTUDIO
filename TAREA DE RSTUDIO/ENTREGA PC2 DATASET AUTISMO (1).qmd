---
title: "ENTREGA 1 PC2 AUTISMO"
format: html
editor: visual
---

# Introducción

-   El presente análisis tiene como objetivo realizar un **estudio exploratorio del dataset sobre autismo**, con el fin de comprender la estructura de los datos, su distribución y las posibles relaciones entre variables.

-   Se llevarán a cabo procedimientos de **carga, limpieza y transformación del dataset**, así como la **creación de visualizaciones con `ggplot2`** que incluyen gráficos de barras, histogramas, boxplots, gráficos de dispersión y matrices de correlación.

-   Este análisis permitirá **identificar patrones, tendencias y diferencias** entre grupos, aportando una base sólida para futuros estudios estadísticos o predictivos relacionados con el diagnóstico de autismo.

# Carga de paquetes necesarios:

Antes de iniciar, cargamos las librerías que nos permitirán:

-   Manipular datos: tidyverse

-   Crear visualizaciones: ggplot2 (incluido en tidyverse)

-   Combinar gráficos: gridExtra

-   Calcular correlaciones: corrplot

-   Generar gráficos exploratorios avanzados: GGally

```{r}
# CARGA DE LIBRERÍAS NECESARIAS
library(tidyverse)
library(gridExtra)
library(GGally)
library(corrplot)
```

# Carga del dataset asignado:

En esta sección se carga el archivo 'autismo.csv' en el entorno de RStudio. Se utiliza read.csv() con stringsAsFactors = FALSE para evitar que las variables categóricas se conviertan automáticamente en factores.

```{r}
# CARGA DEL DATASET
autismo <- read.csv("C:/Users/TU_USUARIO/Desktop/Data/autismo.csv", stringsAsFactors = FALSE)

# Exploramos la estructura general del dataset
str(autismo)
summary(autismo)
head(autismo)

```

# CONVERSIÓN DE VARIABLES CATEGÓRICAS A FACTORES

Muchas variables categóricas se cargan como texto (tipo "character"). Para analizarlas correctamente y graficarlas con ggplot2, las convertimos en factores con mutate(across()).

```{r}

autismo <- autismo %>%
  mutate(across(where(is.character), as.factor))

# Verificar tipos de datos después de la conversión
str(autismo)
```

# GRÁFICOS DE BARRAS (FRECUENCIAS ABSOLUTAS Y RELATIVAS)

Los gráficos de barras permiten visualizar la distribución de una variable categórica, mostrando cuántas observaciones hay \# en cada categoría (frecuencia absoluta) o su proporción (frecuencia relativa).

```{r}
# Frecuencia absoluta del diagnóstico de autismo
ggplot(autismo, aes(x = diagnostico_autismo)) +
  geom_bar(fill = "steelblue") +
  labs(title = "Frecuencia del diagnóstico de autismo",
       x = "Diagnóstico", y = "Frecuencia absoluta")

# Frecuencia relativa (proporciones)
ggplot(autismo, aes(x = diagnostico_autismo, y = ..prop.., group = 1)) +
  geom_bar(fill = "tomato") +
  labs(title = "Frecuencia relativa del diagnóstico de autismo",
       x = "Diagnóstico", y = "Proporción")
```

# HISTOGRAMAS PARA VARIABLES NUMÉRICAS

Los histogramas muestran cómo se distribuyen los valores de una variable numérica. Permiten identificar asimetrías, valores atípicos y la forma general de la distribución (normal, sesgada, etc.).

```{r}
# Histograma simple
ggplot(autismo, aes(x = edad)) +
  geom_histogram(bins = 20, fill = "skyblue", color = "white") +
  labs(title = "Distribución de la edad", x = "Edad", y = "Frecuencia")

# Histograma con densidad
ggplot(autismo, aes(x = edad, y = ..density..)) +
  geom_histogram(bins = 20, fill = "darkseagreen", color = "white") +
  geom_density(color = "red", size = 1) +
  labs(title = "Distribución y densidad de la edad", x = "Edad", y = "Densidad")
```

# BOXPLOTS (DIAGRAMA DE CAJA)

Los boxplots permiten visualizar la mediana, cuartiles y posibles valores atípicos de una variable numérica. Son útiles para comparar distribuciones y detectar outliers.

```{r}
ggplot(autismo, aes(y = edad)) +
  geom_boxplot(fill = "orchid") +
  labs(title = "Distribución de la edad", y = "Edad")
```

# GRÁFICOS DE BARRAS AGRUPADAS Y PROPORCIONALES

Cuando se desea comparar dos variables categóricas (por ejemplo, género y diagnóstico), se utilizan barras agrupadas o apiladas.

```{r}
# Barras agrupadas: diagnóstico según género
ggplot(autismo, aes(x = genero, fill = diagnostico_autismo)) +
  geom_bar(position = "dodge") +
  labs(title = "Diagnóstico de autismo por género",
       x = "Género", y = "Frecuencia")

# Barras apiladas (proporciones)
ggplot(autismo, aes(x = genero, fill = diagnostico_autismo)) +
  geom_bar(position = "fill") +
  labs(title = "Proporción de diagnóstico de autismo por género",
       x = "Género", y = "Proporción")
```

# BOXPLOT AGRUPADO Y HISTOGRAMAS FACETADOS

Permiten comparar variables continuas según categorías.

Ejemplo: cómo varía la edad según el diagnóstico.

```{r}
# Boxplot agrupado
ggplot(autismo, aes(x = diagnostico_autismo, y = edad, fill = diagnostico_autismo)) +
  geom_boxplot() +
  labs(title = "Distribución de edad según diagnóstico",
       x = "Diagnóstico de autismo", y = "Edad")

# Histograma facetado
ggplot(autismo, aes(x = edad, fill = diagnostico_autismo)) +
  geom_histogram(bins = 20, color = "white") +
  facet_wrap(~diagnostico_autismo) +
  labs(title = "Distribución de edades por diagnóstico de autismo",
       x = "Edad", y = "Frecuencia")
```

# GRÁFICO DE DISPERSIÓN CON LÍNEA DE REGRESIÓN

Se utiliza para estudiar la relación entre dos variables numéricas. Añadir una línea de regresión ayuda a identificar la tendencia general.

```{r}
# Primero creamos una variable de puntuación total (suma de las 10 preguntas)
autismo <- autismo %>%
  mutate(puntuacion_total = puntuacion_p1 + puntuacion_p2 + puntuacion_p3 +
           puntuacion_p4 + puntuacion_p5 + puntuacion_p6 + puntuacion_p7 +
           puntuacion_p8 + puntuacion_p9 + puntuacion_p10)

# Gráfico de dispersión edad vs puntuación total
ggplot(autismo, aes(x = edad, y = puntuacion_total)) +
  geom_point(color = "steelblue", alpha = 0.6) +
  geom_smooth(method = "lm", color = "red", se = TRUE) +
  labs(title = "Relación entre edad y puntuación total",
       x = "Edad", y = "Puntuación total")
```

# MATRIZ DE CORRELACIÓN PARA VARIABLES NUMÉRICAS

Permite evaluar el grado de relación entre múltiples variables numéricas. \# Los coeficientes de correlación varían entre -1 (inversa perfecta) \# y +1 (directa perfecta).

```{r}
# Seleccionamos las variables numéricas
num_vars <- autismo %>% select(where(is.numeric))

# Calculamos la matriz de correlación
corr <- cor(num_vars, use = "complete.obs")

# Graficamos la matriz de correlación
corrplot(corr, method = "color", type = "upper", tl.cex = 0.8)
```

# ORGANIZACIÓN DE MÚLTIPLES GRÁFICOS EN UNA SOLA PÁGINA

Usamos grid.arrange() para mostrar varios gráficos simultáneamente. Esto es útil para comparar visualmente distintos aspectos del dataset.

```{r}
p1 <- ggplot(autismo, aes(x = diagnostico_autismo)) +
  geom_bar(fill = "steelblue") +
  ggtitle("Frecuencia del diagnóstico de autismo")

p2 <- ggplot(autismo, aes(x = edad)) +
  geom_histogram(bins = 20, fill = "skyblue", color = "white") +
  ggtitle("Distribución de la edad")

grid.arrange(p1, p2, ncol = 2)
```

# EXPORTACIÓN DE GRÁFICOS A ARCHIVOS PNG

Finalmente, se exportan los gráficos creados a archivos PNG de alta calidad. \# Esto permite incluirlos en informes o presentaciones.

```{r}
ggsave("grafico_diagnostico_autismo.png", p1, width = 6, height = 4, dpi = 300)
ggsave("grafico_distribucion_edad.png", p2, width = 6, height = 4, dpi = 300)
```
